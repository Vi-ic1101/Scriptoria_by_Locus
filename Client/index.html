<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DraftRoom | The Filmmaker's Studio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Courier+Prime:wght@400;700&family=Inter:wght@300;400;500&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- Background Elements -->
    <div class="noise-overlay"></div>
    <div class="vignette"></div>

    <!-- PRELOADER -->
    <div id="loading-overlay" class="hidden">
        <div class="loading-content">
            <h2 id="loading-status">INITIALIZING STUDIO...</h2>
            <div class="loading-bar-container">
                <div id="loading-bar"></div>
            </div>
            <p id="loading-quote">"Everything begins with an idea."</p>
        </div>
    </div>

    <!-- APP CONTAINER -->
    <div id="app-container">

        <!-- VIEW 1: WELCOME (MARQUEE) -->
        <section id="view-welcome" class="view active">
            <div class="spotlight"></div>
            <div class="marquee-content">
                <h1 class="title-main">DRAFTROOM</h1>
                <p class="subtitle">Where Algorithms Meet Artistry</p>
                <button class="btn-primary huge" onclick="navigateTo('view-input')">ENTER STUDIO</button>
            </div>
        </section>

        <!-- VIEW 2: INPUT (WRITERS' ROOM) -->
        <section id="view-input" class="view">
            <header class="app-header">
                <div class="logo-small" onclick="navigateTo('view-welcome')">DRAFTROOM</div>
                <div class="step-indicator">PHASE 1: CONCEPTUALIZATION</div>
            </header>

            <div class="workspace">
                <aside class="specs-panel">
                    <h3>TECHNICAL SPECS</h3>
                    <div class="control-group">
                        <label>GENRE</label>
                        <select id="genre-select">
                            <option value="Drama">Drama</option>
                            <option value="Sci-Fi">Sci-Fi</option>
                            <option value="Noir">Noir</option>
                            <option value="Comedy">Comedy</option>
                            <option value="Horror">Horror</option>
                            <option value="Fantasy">Fantasy</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>SCENE COUNT</label>
                        <select id="scene-count">
                            <option value="1">Short (1 Scene)</option>
                            <option value="3-5">Standard (3-5 Scenes)</option>
                            <option value="5-10">Extended (5-10 Scenes)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>LANGUAGE</label>
                        <select id="language-select">
                            <option value="English">English</option>
                            <option value="Spanish">Spanish</option>
                            <option value="French">French</option>
                            <option value="Japanese">Japanese</option>
                            <option value="Hindi">Hindi</option>
                        </select>
                    </div>
                </aside>

                <main class="canvas-panel">
                    <div class="input-wrapper">
                        <textarea id="story-prompt"
                            placeholder="Fade in: A lone detective stands in the rain..."></textarea>
                        <div class="action-bar">
                            <button id="generate-btn" class="btn-primary" onclick="handleGeneration()">
                                <span class="btn-text">ACTION</span>
                                <span class="loader hidden"></span>
                            </button>
                        </div>
                    </div>
                </main>
            </div>
        </section>

        <!-- VIEW 3: OUTPUT (STUDIO MODE) -->
        <section id="view-output" class="view">

            <div class="studio-grid">

                <!-- COLUMN 1: NAVIGATION -->
                <aside class="studio-sidebar">
                    <div class="logo-area" onclick="navigateTo('view-welcome')">DRAFTROOM</div>

                    <nav class="nav-menu">
                        <button class="nav-btn active" onclick="switchTab('screenplay')">
                            <span class="icon">üìú</span> SYNOPSIS
                        </button>
                        <button class="nav-btn" onclick="switchTab('characters')">
                            <span class="icon">üë•</span> CAST
                        </button>
                        <button class="nav-btn" onclick="switchTab('sound')">
                            <span class="icon">üîä</span> SOUND
                        </button>
                    </nav>

                    <div class="sidebar-footer">
                        <button class="btn-secondary small" onclick="navigateTo('view-input')">NEW DRAFT</button>
                    </div>
                </aside>

                <!-- COLUMN 2: MAIN STAGE -->
                <main class="studio-stage">
                    <div id="screenplay-content" class="paper-sheet">
                        <!-- Content injected here -->
                    </div>
                    <!-- Dynamic Dock Content (Synopsis/Cast/Sound) -->
                    <div id="dock-content" class="dock-content hidden"></div>
                </main>

                <!-- COLUMN 3: INSPECTOR -->
                <aside class="studio-inspector">

                    <!-- SECTION A: EXPORT -->
                    <div class="inspector-section">
                        <h3>DISTRIBUTION</h3>
                        <div class="button-grid">
                            <button class="btn-tool small" onclick="download('pdf')">üìÑ PDF</button>
                            <button class="btn-tool small" onclick="download('docx')">üìù DOCX</button>
                            <button class="btn-tool small" onclick="generateShareLink()">üîó LINK</button>
                        </div>
                    </div>

                    <!-- SECTION B: REFINEMENT (Script Doctor) -->
                    <div class="inspector-section flex-grow">
                        <h3>SCRIPT DOCTOR</h3>
                        <button id="refine-btn" class="btn-tool highlight" onclick="startRefinement()">
                            ‚ú® IMPROVE SCRIPT
                        </button>

                        <div id="refinement-dock" class="hidden">
                            <div id="questions-container"></div>
                            <button id="apply-fix-btn" class="btn-primary small full-width"
                                onclick="submitRefinements()">APPLY FIXES</button>
                        </div>
                    </div>

                    <!-- SECTION C: PRODUCTION (Media) -->
                    <div class="inspector-section">
                        <h3>PRODUCTION</h3>
                        <button class="btn-tool" onclick="generateMusic()">üéµ GENERATE SCORE</button>
                        <button class="btn-tool" onclick="narrateScript()">üéôÔ∏è GENERATE VO</button>

                        <div id="media-player-container"></div>
                    </div>

                </aside>

            </div>
        </section>

    </div>

    <script src="script.js"></script>
</body>

</html>